<div class="container py-5">
  
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="fw-bold text-primary mb-0">ğŸ“… Agenda de Citas</h2>
      <p class="text-muted">Gestiona las reservas de tu peluquerÃ­a</p>
    </div>
    <a [routerLink]="['/peluqueria', peluqueriaId]" class="btn btn-outline-secondary">
      &larr; Volver al Detalle
    </a>
  </div>

  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-2">Cargando agenda...</p>
  </div>

  <div class="card shadow border-0" *ngIf="!loading">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="bg-light">
          <tr>
            <th class="py-3 ps-4">Fecha / Hora</th>
            <th class="py-3">Cliente</th>
            <th class="py-3">Servicio</th>
            <th class="py-3">Estado / Acciones</th>
            <th class="py-3">Precio</th>
            <th class="py-3">Contacto</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let res of reservas">
            <!-- Fecha y Hora -->
            <td class="ps-4">
              <div class="fw-bold text-dark">{{ res.fecha }}</div>
              <div class="text-primary small fw-bold">ğŸ•’ {{ res.hora }}</div>
            </td>
            
            <!-- Nombre del Cliente -->
            <td>
              <div class="fw-bold">{{ res.nombreCliente }}</div>
            </td>

            <!-- Nombre del Servicio -->
            <td>
              <span class="badge bg-info text-dark">{{ res.nombreServicio }}</span>
            </td>

            <!-- Caso A: PENDIENTE -> Mostrar botones Aceptar/Rechazar -->
             <td class="text-center">
              <div *ngIf="res.estado === 'PENDIENTE'" class="btn-group shadow-sm" role="group">
                <button class="btn btn-sm btn-success" (click)="aceptar(res)" title="Aceptar Cita">
                  âœ”
                </button>
                <button class="btn btn-sm btn-danger" (click)="rechazar(res)" title="Rechazar Cita">
                  âœ–
                </button>
              </div>

              <!-- Caso B: CONFIRMADA -> Mostrar etiqueta Verde -->
              <span *ngIf="res.estado === 'CONFIRMADA'" class="badge bg-success p-2">
                âœ… Aceptada
              </span>
              
              <!-- Caso C: CANCELADA -> Mostrar etiqueta Gris -->
              <span *ngIf="res.estado === 'CANCELADA'" class="badge bg-secondary p-2">
                âŒ Rechazada
              </span>
            
            </td>

            <td class="fw-bold text-success">
              {{ res.precioServicio }}â‚¬
            </td>
            <td>
              
              <a href="mailto:{{res.emailCliente}}" class="btn btn-sm btn-outline-primary" title="Enviar correo">
                âœ‰ï¸ 
              </a>
            </td>
          </tr>
          
          <tr *ngIf="reservas.length === 0">
            <td colspan="5" class="text-center py-5 text-muted">
              ğŸ“­ No tienes reservas pendientes.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
